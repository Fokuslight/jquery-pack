(function($) {

	$.fn.sas = function(o) {
		return this.each(function(index, elem) {
			var slideList  = $(elem),
				slides     = slideList.find('li'),
				wrapWidth  = $(slides[0]).width(),
				wrapHeight = $(slides[0]).height();


			// init elems and css properties for elems
			(function initStyleAndElems() {
				slideList.wrap('<div class="slider-wrap' + "-" + index + '"></div>');
				var slideWrap = $(elem).parent('div');
				slideList.css({
					position    :  'absolute',
					width       :  wrapWidth*slides.length
				});
				slideWrap.css({
					width       :  wrapWidth,
					height      :  wrapHeight,
					overflow    :  'hidden',
					position    :  'relative'
				});

				// adding slide controls and css properties for them
				slideWrap.append('<span class="prev">prev</span><span class="next">next</span>');
				var controls    =  $(slideWrap.find('span')),
					prev        =  slideWrap.children('.prev'),
					next        =  slideWrap.children('.next');

				controls.css({
					display     :  'block',
					width       :  40,
					height      :  30,
					background  :  '#fff',
					position    :  'absolute',
					top         :  wrapHeight/2 - 15,
					textAlign   :  'center',
					cursor      :  'pointer',
					lineHeight  :  '30px'
				});

				prev.css({
					left        :  0
				});

				next.css({
					right       :  0
				});
				// init animate logic of slide if click on next or prev 
				controls.on('click', function() {
					($(this).text() === 'next') ? moveForward() : moveBack()
				});
			})();

			// init move forward function 
			function moveForward() {
				slideList.animate({
					left: '-=' + wrapWidth
				}, function() {
					$(this).children('li').first().appendTo(slideList).parent(slideList).css({
						left: '+=' + wrapWidth
					});
				});
			}

			// ini move back function
			function moveBack() {
				slideList.children('li').last().prependTo(slideList).parent(slideList).css({
					left: '-='+wrapWidth
				}).animate({
					left: '+='+wrapWidth
				});
			}
		})
	}

	$.fn.st = function(o) {
		return this.each(function(index, elem) {
			var tabWrap         =  $(elem),
				elemList        =  $(tabWrap.find('ul')[0]),
				blockList       =  $(tabWrap.find('ul')[1]),
				elemLinks       =  elemList.find('a'),
				blockElems      =  blockList.find('li'),
				elemLinksWidth  =  tabWrap.width()/elemLinks.length;
				console.log(elemLinksWidth);

				elemLinks.css({
					display     :  'block',
					float       :  'left',
					width       :  elemLinksWidth,
					textAlign   :  'center'
				});

				elemList.css({
					overflow    :  'hidden'
				});

				tabWrap.css({
					position    :  'relative'
				});

				blockList.css({
					overflow    :  'hidden'
				});

				blockElems.css({
					position    :  'absolute',
					display     :  'none',
				});

				blockElems.first().css({
					display     :  'block'
				});

				(function turnTab() {
					elemLinks.each(function(index, elem) {
						$(elem).attr('name' , index);
					});
					blockElems.each(function(index, elem) {
						$(elem).attr('name' , index);

					});

					$(elemLinks).on('click', function(e) {
						blockElems.fadeOut();
						var $this = $(this);
						blockElems.each(function(index, elem) {
							if ($(elem).attr('name') === $this.attr('name')) {
								$(elem).fadeIn();
							}
						});
						e.preventDefault();
					});
				})();
		});

	}

	$.fn.fs = function(o) {
		return this.each(function(index, elem) {
			var slideList   =  $(elem);

			slideList.wrap('<div class="slider-wrap"></div>');

			var slideWrap   =  $('.slider-wrap'),
				slides      =  slideList.find('li'),
				width       =  $(slides[0]).width(),
				height      =  $(slides[0]).height();

			slideWrap.append('<span class="prev">prev</span><span class="next">next</span>');

			var controls    =  slideWrap.find('span'),
				next        =  slideWrap.children('.next'),
				prev        =  slideWrap.children('.prev');

			(function intStyles() {

				slideWrap.css({
					width       :  width,
					height      :  height,
					position    :  'relative'
				});

				slides.css({
					position    :  'absolute',
					display     :  'none'
				});

				slides.first().css({
					display     :  'block'
				});

				controls.css({
					width       :  60,
					height      :  40,
					position    :  'absolute',
					top         :  height/2 - 20,
					lineHeight  :  '40px',
					color       :  '#000',
					display     :  'block',
					textAlign   :  'center',
					background  :  "#fff",
					cursor      :  'pointer'
				});

				next.css({
					right       :  0
				});

				prev.css({
					left        :  0
				});
				
			})();

			(function fading() {
				controls.on('click', function() {
					var $this = $(this);
					$this.attr('class') === 'next' ? fadeForward() : fadeBack();
				});
			})();

			function fadeForward() {
				slideList.children('li').first().appendTo(slideList);
				adapting()
			};

			function fadeBack() {
				slideList.children('li').last().prependTo(slideList);
				adapting()
			};

			function adapting() {
				slides.fadeOut();
				slideList.children('li').first().fadeIn();
			}
		});
	}



	$.fn.ttop = function(o) {
		return this.each(function(index, elem) {
			var $this = $(elem);
				$this.on('click', function(e) {
					$('body').animate({
						scrollTop: 0
					}, 400);
					e.preventDefault();
				});
		});
	}

	$.fn.tbot = function(o) {
		return this.each(function(index, elem) {
			var $this = $(elem);
				$this.on('click', function(e) {
					$('body').animate({
						scrollTop: $(document).height()
					}, 400);
					e.preventDefault();
				});
		});
	}

})(jQuery)
